<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>First Puzzle Page</title>
  <style>
    #puzzle-heading {
      text-align: center;
    }

    #container {
      width: 850px;
      border: 2px solid black;
      border-radius: 20px;
      margin: 10px auto;
      padding: 10px;
    }

    #piece-container {
      width: 280px;
      height: 225px;
      border: 1px solid black;
      float: right;
      text-align: center;
      font-size: 30px;
      line-height: 400px;
      position: relative;
      margin-left: 100px;
    }

    #puzzle-container {
      width: 280px;
      height: 225px;
      border: 1px solid black;
      float: left;
      position: relative;
      margin-right: 100px;
    }

    ul {
      list-style: none;
      text-align: center;
    }

    li {
      display: inline-block;
    }

    ul button {
      width: 100px;
      border: 1px solid black;
      font-size: 20px;
      border-radius: 5px;
      padding: 5px;
      margin-top: 10px;
    }

    nav {
      background-color: #333;
      padding: 10px;
      text-align: center;
    }

    nav a {
      color: white;
      text-decoration: none;
      padding: 10px;
      margin: 0 10px;
      cursor: pointer;
    }

    nav a:hover {
      background-color: #555;
    }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script>
    $(document).ready(function () {
      // Function to create puzzle pieces with images
      function createPuzzlePiece(id, imageUrl) {
        return $('<img>', {
          class: 'puzzle-piece',
          id: 'piece-' + id,
          style: "position:absolute; left: 0",
          src: imageUrl
        });
      }

      // Initial setup: create puzzle pieces with images and append them to the container
      const puzzleImages = [
        'images/piece1.webp',
        'images/piece2.webp',
        'images/piece3.webp',
        'images/piece4.webp',
        'images/piece5.webp',
        'images/piece6.webp',
        'images/piece7.webp',
        'images/piece8.webp',
        'images/piece9.webp',
      ];

      for (let i = 1; i <= 9; i++) {
        const imageUrl = puzzleImages.shift();
        if (i == 9) {
          $('#puzzle-container').append(createPuzzlePiece(i, imageUrl));
          break
        }
        $('#piece-container').append(createPuzzlePiece(i, imageUrl));
      }

      // Function to move every piece but one to their correct positions
      function movePiecesToFinalPositions() {
  var puzzleContainer = $('#puzzle-container');

  const finalPositions = {
    'piece-1': { top: 0, left: 0 },
    'piece-2': { top: 0, left: 93 },
    'piece-3': { top: 0, left: 182 },
    'piece-4': { top: 75, left: 0 },
    'piece-5': { top: 73, left: 93 },
    'piece-6': { top: 73, left: 186 },
    'piece-7': { top: 150, left: 0 },
    'piece-8': { top: 148, left: 93 },
  };

  // Animate each puzzle piece to its final position
  $.each(finalPositions, function (pieceId, finalPosition) {
    var piece = $('#' + pieceId);
    var piecePosition = piece.position(); // Relative position within the puzzle container

    // Calculate the difference between the current position and the final position
    var topDifference = finalPosition.top - piecePosition.top;
    var leftDifference = finalPosition.left - piecePosition.left;

    // Animate the piece to its final position
    piece.animate({
      top: '+=' + topDifference,
      left: '+=' + leftDifference
    }, 2000);
  });
}


      // Move every piece but one to their correct positions when the page loads
      movePiecesToFinalPositions();

      function animatePiece(direction) {
        const piece = $('#piece-9'); // Assume the last piece is the movable one
        const verticaldist = 50;
        const lateraldist = 50.2;

        // Get the current position of the piece
        var currentPosition = piece.offset();

        // Set boundaries based on the screen size
        var maxX = $(window).width() - piece.width();
        var maxY = $(window).height() - piece.height();

        switch (direction) {
          case 'up':
            if (currentPosition.top - verticaldist >= 0) {
              piece.animate({ top: `-=${verticaldist}px` });
            }
            break;
          case 'down':
            if (currentPosition.top + verticaldist <= maxY) {
              piece.animate({ top: `+=${verticaldist}px` });
            }
            break;
          case 'left':
            if (currentPosition.left - lateraldist >= 0) {
              piece.animate({ left: `-=${lateraldist}px` });
            }
            break;
          case 'right':
            if (currentPosition.left + lateraldist <= maxX) {
              piece.animate({ left: `+=${lateraldist}px` });
            }
            break;
        }
      }

      // Button click event listeners
      $('#up').on('click', function () { animatePiece('up'); });
      $('#down').on('click', function () { animatePiece('down'); });
      $('#left').on('click', function () { animatePiece('left'); });
      $('#right').on('click', function () { animatePiece('right'); });

      // jQuery menu click event
      $('#menu-puzzle2').on('click', function () {
        // Replace this with actual navigation logic to Puzzle 2
          window.location.href = 'second-puzzle.html'; // Redirect to the second puzzle page
      });
    })
  </script>
</head>

<body>
  <nav>
    <a id="menu-puzzle2">Puzzle 2</a>
  </nav>
  <h1 id="puzzle-heading">Puzzle 1</h1>
  <div id="container">
    <div id="piece-container"></div>
    <div id="puzzle-container"></div>
    <ul id="buttons">
      <!-- <li><button id="animate">Animate</button></li> -->
      <li><button id="up">Up</button></li>
      <li><button id="down">Down</button></li>
      <li><button id="left">Left</button></li>
      <li><button id="right">Right</button></li>
    </ul>
  </div>
</body>

</html>
